<Project Sdk="Microsoft.NET.Sdk.Web">

    <!-- Basic Project Properties -->
    <PropertyGroup>
        <TargetFramework>net8.0</TargetFramework>
        <OutputType>Library</OutputType>
        <IsPackable>true</IsPackable>
        <ImplicitUsings>enable</ImplicitUsings>
        <Nullable>enable</Nullable>
        <LangVersion>latest</LangVersion>
        <EnableDefaultCompileItems>false</EnableDefaultCompileItems>
    </PropertyGroup>

    <!-- NuGet Package Metadata -->
    <PropertyGroup>
        <!-- Core identification -->
        <PackageId>PetstoreApi.Contracts</PackageId>
        <Version>1.0.1</Version>
        <Authors>Generated by OpenAPI Generator</Authors>
        <Company>Generated by OpenAPI Generator</Company>
        <Description>This is a sample server Petstore server. For this sample, you can use the api key &#x60;special-key&#x60; to test the authorization filters.</Description>
        
        <!-- Licensing -->
        <PackageLicenseExpression>Apache-2.0</PackageLicenseExpression>
        
        <!-- Discoverability -->
        <PackageTags>openapi;minimal-api;contracts</PackageTags>
        
        <!-- Packaging behavior -->
        <GeneratePackageOnBuild>false</GeneratePackageOnBuild>
    </PropertyGroup>

    <!-- Framework Dependencies -->
    <ItemGroup>
        <!-- ASP.NET Core framework reference for RouteGroupBuilder and Minimal API types -->
        <FrameworkReference Include="Microsoft.AspNetCore.App" />
    </ItemGroup>

    <!-- Package Dependencies -->
    <ItemGroup>
        <!-- MediatR for Commands/Queries (REQUIRED) -->
        <PackageReference Include="MediatR" Version="12.2.0" />
        <PackageReference Include="MediatR.Contracts" Version="2.0.1" />
        
        <!-- ASP.NET Core extensions -->
        <PackageReference Include="Microsoft.AspNetCore.OpenApi" Version="8.0.0" />
        
        <!-- FluentValidation (CONDITIONAL on useValidators) -->
        <PackageReference Include="FluentValidation" Version="11.9.0" />
        <PackageReference Include="FluentValidation.DependencyInjectionExtensions" Version="11.9.0" />
    </ItemGroup>

    <!-- Generated Source Files (Unified References) -->
    <ItemGroup>
        <!-- Commands from Contract/ directory (MediatR request definitions) -->
        <Compile Include="..\..\Contract\Commands\*.cs" Link="Commands\%(Filename)%(Extension)" />
        
        <!-- Queries from Contract/ directory (MediatR request definitions) -->
        <Compile Include="..\..\Contract\Queries\*.cs" Link="Queries\%(Filename)%(Extension)" />
        
        <!-- DTOs from Contract/ directory (request/response DTOs with enum types) -->
        <Compile Include="..\..\Contract\DTOs\*.cs" Link="DTOs\%(Filename)%(Extension)" />
        
        <!-- Endpoints from Contract/ directory (Minimal API endpoint definitions) -->
        <Compile Include="..\..\Contract\Endpoints\*.cs" Link="Endpoints\%(Filename)%(Extension)" />
        
        <!-- Converters from Contract/ directory (JSON serialization for DTO enums) -->
        <Compile Include="..\..\Contract\Converters\*.cs" Link="Converters\%(Filename)%(Extension)" />
        
        <!-- Validators from Contract/ directory (FluentValidation validators) -->
        <Compile Include="..\..\Contract\Validators\*.cs" Link="Validators\%(Filename)%(Extension)" />
    </ItemGroup>
    
    <!-- NOTE: Models and Handlers are generated as templates in src/PetstoreApi/ -->
    <!-- They are NOT included in the Contracts NuGet package -->

    <!-- Extension Methods (Local to project) -->
    <ItemGroup>
        <Compile Include="Extensions\EndpointExtensions.cs" />
        <Compile Include="Extensions\ValidatorExtensions.cs" />
    </ItemGroup>

</Project>
